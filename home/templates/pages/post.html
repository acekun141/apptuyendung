<!DOCTYPE html>
<html lang="en">

<head>
    {% load staticfiles %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Đăng tin tuyển dụng </title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontawesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.min.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>

<body>
    <header id="header" class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-expand-sm navbar-light justify-content-between">
                        <div class="header-logo">
                            <div class="img-logo">
                                <a class="navbar-brand" href="#"><img src="" alt="Logo"></a>
                            </div>
                        </div>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbars" aria-controls="navbars" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbars">
                            <ul class="navbar-nav ml-auto ">
                                {% if user.username %}
                                <li class="nav-item ">
                                    <a class="nav-link" href="{% url 'home' %}">Trang chủ</a>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link" href="{% url 'infoform' %}">Khai báo thông tin</a>
                                </li>
                                <li class="nav-item dropdown active">
                                    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Tin tuyển dụng</a>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li><a href="{% url 'post' %}">Đăng tin tuyển dụng</a></li>
                                        <li class="active"><a href="{% url 'newfeed' %}">Danh sách tin tuyển dụng</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Tài khoản</a>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li class="">
                                            <a class="dropdown-info" href="{% url 'listpost' %}"><i><span class="text-primary">{{user.username}}</span></i></a>
                                        </li>
                                        <li role="separator" class="dropdown-divider"></li>
                                        <li role="separator" class="dropdown-divider"></li>
                                        <li><a href="">Thoát</a></li>
                                    </ul>
                                </li>
                                {% else %}
                                <li class="nav-item ">
                                    <a class="nav-link" href="{% url 'home' %}">Trang chủ</a>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link" href="{% url 'signin' %}">Đăng nhập</a>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link" href="{% url 'signup' %}">Đăng ký</a>
                                </li>
                                
                                {% endif %}
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header><!-- /header -->

    <main id="main" class="main">
        <div class="container">
            {% for info in info %}
            {% if info.username|stringformat:"s" == post.username|stringformat:"s" %}
            <div class="post" style="background-color:white; padding:20px; margin-bottom:20px; border-radius:5px;">
                <p style="color:blue; font-size:2em; text-transform:uppercase; margin:0; padding:0;"><a href="{% url 'singlepost' post.id %}">{{info.company}}</a></p>
                <p style="font-size:1em; margin-bottom:30px">{{info.local}}</p>
            {% endif %}
            {% endfor %}
                <p><strong>Tiêu đề: </strong>{{post.title}}</p>
                <p><strong>Chuyên ngành: </strong>{{post.speciality}}</p>
                <p><strong>Nơi làm việc: </strong>{{post.workplace}}</p>
                <p><strong>Số lượng tuyển dụng: </strong>{{post.amount}} người</p>
                <p><strong>Cấp bậc: </strong>{{post.rank}}</p>
                <p><strong>Loại làm việc: </strong>{{post.worktime}}</p>
                <p><strong>Giới tính: </strong>{{post.sex}}</p>
                <p><strong>Kinh nghiệm: </strong>{{post.exp}}</p>
                <p><strong>Mức lương: </strong>{{post.salary}}</p><br>
                <p><strong>Hạn chót nộp hồ sơ: </strong>{{post.deadline}}</p>
                <p><strong>Tên người nhận hồ sơ: </strong>{{post.name}}</p>
                <p><strong>Email: </strong>{{post.email}}</p>
                <p><strong>Số điện thoại: </strong>{{post.contact}}</p>
                <p><strong>Giới thiệu về công ty: </strong>{{post.des_of_company}}</p>
                <p><strong>Mô tả công việc: </strong>{{post.describe}}</p>
                <p><strong>Yêu cầu: </strong>{{post.require}}</p>
                <p><strong>Quyền lợi của ứng viên: </strong>{{post.benefit}}</p>
                <p><strong>Kĩ năng: </strong>{{post.skill}}</p>
                
                <p style="font-size:.9em; color:orange">{{post.time}}</p>
            </div>
        </div>
    </main>
    <footer id="footer" class="footer" style="height: 800px; background: #000;">

    </footer>
    <script src="{% static 'js/jquery-3.3.1.slim.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/select2.min.js' %}"></script>
    <script src="{% static 'js/moment.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/bootstrap-datepicker.min.js' %}"></script>
    <script src="{% static 'js/ckeditor.js' %}"></script>
    <script>
        /* CKEDITOR - DatePicker - Select 2*/

        $('.dateTime').datepicker();

        $('.selectDrop').select2();

        $('#major').select2({
            placeholder: 'Chọn ngành/ nghề',
            allowClear: true,
        });

        $('#address').select2({
            placeholder: 'Chọn địa điểm',
            allowClear: true,
        });

        $('#skill').select2({
            placeholder: 'Chọn kỹ năng',
            allowClear: true,
        });
        /* End */

        /* Choose select 2 add div */
        $(document).ready(function() {
            $('#salary-type').change(function() {
                if ($(this).val() == 'deal') {
                    $("#salary").hide();
                } else if ($(this).val() == 'from') {
                    $("#salary").show();
                    $("#salary").find("#salary_from").show();
                    $("#salary").find("#salary-separator").hide();
                    $("#salary").find("#salary_to").hide();
                } else if ($(this).val() == 'to') {
                    $("#salary").show();
                    $("#salary").find("#salary_from").hide();
                    $("#salary").find("#salary-separator").hide();
                    $("#salary").find("#salary_to").show();
                } else if ($(this).val() == 'from-to') {
                    $("#salary").show();
                    $("#salary").find("#salary_from").show();
                    $("#salary").find("#salary-separator").show();
                    $("#salary").find("#salary_to").show();
                } else {
                    $("#salary").hide();
                }
            });
        });
        /* End*/

        /* Guide Scroll */
        $(document).ready(function() {
            if ($(window).width() > 991) {
                $(window).scroll(function() {

                    var heightHeader = $('#header').height();
                    var heightMain = $('#main').height();
                    var heightPostLeft = $('#postLeft').height();
                    var heightGuide = $('#guide').height();
                    var startScroll = heightHeader + 50;
                    var endScroll = startScroll + heightPostLeft;
                    var totalScroll = endScroll - (heightGuide + 20);

                    var WinScrollHeight = $(this).scrollTop();
                    var oldScroll = startScroll;
                    var newScroll = (WinScrollHeight - oldScroll) + 20;

                    var absoluteGuide = document.getElementById("guide");

                    if ((($(this).scrollTop()) > startScroll) && (($(this).scrollTop() < totalScroll))) {
                        absoluteGuide.style.top = newScroll + "px";
                        $('#guide').addClass("scroll");
                        $('#guide').removeClass("absoluteBot");
                    } else if (($(this).scrollTop()) >= totalScroll) {
                        $('#guide').addClass("absoluteBot");
                        $('#guide').addClass("scroll");
                        absoluteGuide.style.top = "unset";
                    } else {
                        $('#guide').removeClass("scroll");
                        $('#guide').removeClass("absoluteBot");
                        absoluteGuide.style.top = "unset";
                    }
                })
            };

            $(window).resize(function() {
                if ($(window).width() > 991) {
                    $(window).scroll(function() {

                        var heightHeader = $('#header').height();
                        var heightMain = $('#main').height();
                        var heightPostLeft = $('#postLeft').height();
                        var heightGuide = $('#guide').height();
                        var startScroll = heightHeader + 50;
                        var endScroll = startScroll + heightPostLeft;
                        var totalScroll = endScroll - (heightGuide + 20);

                        var WinScrollHeight = $(this).scrollTop();
                        var oldScroll = startScroll;
                        var newScroll = (WinScrollHeight - oldScroll) + 20;

                        var absoluteGuide = document.getElementById("guide");

                        if ((($(this).scrollTop()) > startScroll) && (($(this).scrollTop() < totalScroll))) {
                            absoluteGuide.style.top = newScroll + "px";
                            $('#guide').addClass("scroll");
                            $('#guide').removeClass("absoluteBot");
                        } else if (($(this).scrollTop()) >= totalScroll) {
                            $('#guide').addClass("absoluteBot");
                            $('#guide').addClass("scroll");
                            absoluteGuide.style.top = "unset";
                        } else {
                            $('#guide').removeClass("scroll");
                            $('#guide').removeClass("absoluteBot");
                            absoluteGuide.style.top = "unset";
                        }
                    })
                };
            });
        });
        /* End*/

        /* Guide fix content */
        $(document).ready(function() {
            function showGuide(tips, example) {
                $('#guide-tips').html(tips);
                if (example) {
                    $('#example-content').html(example).show();
                } else {
                    $('#example-content').hide();
                }
            }
            $.fn.extend({
                formGuide: function() {
                    return this.each(function() {
                        $(this).focus(function() {
                            $(this).showGuide();
                        });
                    });
                },
                showGuide: function() {
                    return this.each(function() {
                        var tips = $(this).attr('tips');
                        var example = $(this).attr('example');
                        showGuide(tips, example);
                    });
                }
            });
        });

        $(document).ready(function() {
            $('select').select2().on('select2:open', function() {
                $(this).showGuide();
            });
            $('.hasGuide').formGuide();
            $('#jobTitle').showGuide();
        });
        /* End */

    </script>
</body>

</html>
